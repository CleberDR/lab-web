generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id             Int             @id @default(autoincrement())
  name           String          @db.Text
  cpf            String          @db.VarChar(11)
  enrollment     String          @db.Text
  type           Int
  mail           String          @db.Text
  password String
}

model UserResponse {
  id                  Int               @id @default(autoincrement())
  Question            Question[]
  response            Int?
  questionId          Int?
}

model Rating {
  id                  Int                   @id @default(autoincrement())
  semester            Semester[]
  title               String?
  objective           String?
  startDate           DateTime?             @db.Timestamp(0)
  endDate             DateTime?             @db.Timestamp(0)
  isAnonymous         Boolean?
  status              Boolean?
  url                 String?
  questionGroupRating QuestionGroupRating[]
}

model Question {
  id                  Int                   @id @default(autoincrement())
  QuestionGroupRating QuestionGroupRating[]
  text                String?
  isRequired          Boolean?
  position            Int?
  imageUrl            String?
  userResponse        UserResponse[]
}

model QuestionGroupRating {
  id              Int           @id @default(autoincrement())
  rating          Rating[]
  questionGroup   QuestionGroup @relation(fields: [questionGroupId], references: [id])
  position        Int?
  question        Question      @relation(fields: [questionId], references: [id])
  questionGroupId Int
  questionId      Int
}

model QuestionGroup {
  id                  Int                   @id @default(autoincrement())
  QuestionGroupRating QuestionGroupRating[]
  title               String?
  isDisciplineRelated Boolean?
}

model Class {
  id                Int                 @id @default(autoincrement())
  subject           Subject?           @relation(fields: [subjectId], references: [id])
  semester          Semester?           @relation(fields: [semesterId], references: [id])
  title             String?             @db.Text
  subjectId         Int
  semesterId        Int
  Discipline        Discipline[]
}

model Discipline {
  id       Int     @id @default(autoincrement())
  code     String?
  title    String?
  class    Class?  @relation(fields: [classId], references: [id])
  courseId Int?
  classId  Int?
}

model Subject {
  id    Int     @id @default(autoincrement())
  Class Class[]
}

model Semester {
  id        Int       @id @default(autoincrement())
  name      String?   @db.Text
  startDate DateTime? @db.Timestamp(0)
  endDate   DateTime? @db.Timestamp(0)
  Class     Class?
  Rating    Rating?   @relation(fields: [ratingId], references: [id])
  ratingId  Int?
}

